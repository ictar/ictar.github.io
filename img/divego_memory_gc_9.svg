<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1600px" height="4833px" viewBox="-0.5 -0.5 1600 4833" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 70.88 263 L 70.88 263.71 L 80.91 263.52 L 90.93 262.37 L 100.96 262.94 L 110.98 262.57 L 121.01 262.76 L 131.03 263.02 L 141.06 263.09 L 151.08 262.72 L 161.11 263.61 L 171.13 262.61 L 181.16 262.53 L 191.18 262.32 L 201.21 262.41 L 211.23 263.24 L 221.26 263.25 L 231.28 262.92 L 241.31 262.49 L 251.33 263.62 L 261.36 262.27 L 271.38 263.1 L 281.41 262.74 L 291.43 263.56 L 301.46 262.78 L 311.48 263.08 L 321.51 262.34 L 331.53 263.53 L 341.56 263.7 L 351.58 263.28 L 361.61 263.17 L 371.63 263.69 L 381.66 263.43 L 391.68 262.75 L 401.71 262.44 L 411.73 262.48 L 421.76 262.25 L 431.78 263.65 L 441.81 262.99 L 451.83 263.5 L 461.86 263.54 L 471.88 263 L 471.7 263 L 471.78 273 L 471.73 283 L 471.41 293 L 472.52 303 L 471.19 313 L 471.79 323 L 471.76 333 L 471.42 343 L 472.04 353 L 471.88 363 L 471.88 363.72 L 461.86 362.53 L 451.83 363.24 L 441.81 362.83 L 431.78 363.21 L 421.76 362.7 L 411.73 362.4 L 401.71 362.56 L 391.68 362.76 L 381.66 363.28 L 371.63 362.74 L 361.61 362.87 L 351.58 362.43 L 341.56 362.78 L 331.53 362.76 L 321.51 362.61 L 311.48 363.75 L 301.46 362.75 L 291.43 363.54 L 281.41 363.22 L 271.38 362.6 L 261.36 362.32 L 251.33 363.48 L 241.31 363.47 L 231.28 362.31 L 221.26 362.37 L 211.23 362.84 L 201.21 363.39 L 191.18 363.28 L 181.16 362.37 L 171.13 363.11 L 161.11 363.2 L 151.08 363.24 L 141.06 362.62 L 131.03 363.06 L 121.01 363.45 L 110.98 362.26 L 100.96 362.93 L 90.93 362.33 L 80.91 362.91 L 70.88 363 L 71.36 363 L 70.76 353 L 71.43 343 L 70.68 333 L 70.98 323 L 70.65 313 L 71.31 303 L 70.45 293 L 70.3 283 L 70.72 273 L 70.88 263 L 70.88 263 Z Z" fill="#dae8fc" stroke="#6c8ebf" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 393px; height: 1px; padding-top: 253px; margin-left: 76px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 110px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font face="Comic Sans MS">runtime.gcBgMarkStartWorkers()</font></h1><p><font face="Comic Sans MS">为每一个处理器 P 启动一个用于进行后台标记任务的  goroutine（runtime.gcBgMarkWorker）。这些 goroutine 启动后会进入休眠，等待调度</font></p></div></div></div></foreignObject><text x="76" y="265" fill="#000000" font-family="Helvetica" font-size="12px">runtime.gcBgMarkStartWorkers()...</text></switch></g><rect x="75.14" y="213" width="180" height="20" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="75.14" y="213" width="180" height="20" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 223px; margin-left: 76px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">后台标记模式</font></div></div></div></foreignObject><text x="165" y="227" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">后台标记模式</text></switch></g><path d="M 1206 446 Q 1278.8 446 1278.8 466 Q 1278.8 486 1345.37 486" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1350.62 486 L 1343.62 489.5 L 1345.37 486 L 1343.62 482.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1076" y="416" width="130" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 446px; margin-left: 1077px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">runtime.findrunnable()</font></div></div></div></foreignObject><text x="1141" y="450" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">runtime.findrunnable()</text></switch></g><rect x="1351.74" y="456" width="130" height="60" rx="9" ry="9" fill="#f0a30a" stroke="#bd7000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 486px; margin-left: 1353px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">唤醒 </font><span style="font-family: &quot;comic sans ms&quot; ; text-align: left">gcBgMarkWorker</span></div></div></div></foreignObject><text x="1417" y="490" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">唤醒 gcBgMarkWorker</text></switch></g><path d="M 946 533 Q 946 533 996.37 533" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1001.62 533 L 994.62 536.5 L 996.37 533 L 994.62 529.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 881 503 Q 881 446 1069.63 446" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1074.88 446 L 1067.88 449.5 L 1069.63 446 L 1067.88 442.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="816" y="503" width="130" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 533px; margin-left: 817px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">runtime.schedule()</font></div></div></div></foreignObject><text x="881" y="537" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">runtime.schedule()</text></switch></g><path d="M 1271.74 533 Q 1311.8 533 1311.8 509.5 Q 1311.8 486 1345.37 486" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1350.62 486 L 1343.62 489.5 L 1345.37 486 L 1343.62 482.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1002.74" y="503" width="269" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 267px; height: 1px; padding-top: 533px; margin-left: 1004px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">runtime.gcController.findRunnableGCWorker()</font></div></div></div></foreignObject><text x="1137" y="537" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">runtime.gcController.findRunnableGCWorker()</text></switch></g><path d="M 370.6 473 Q 370.6 495.6 370.6 511.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 370.6 516.88 L 367.1 509.88 L 370.6 511.63 L 374.1 509.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="266.26" y="443" width="208.52" height="30" rx="4.5" ry="4.5" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 207px; height: 1px; padding-top: 458px; margin-left: 267px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">runtime.</span><span style="font-family: &quot;comic sans ms&quot;"> </span><span style="font-family: &quot;comic sans ms&quot;">gcBgMarkWorker</span><span style="font-family: &quot;comic sans ms&quot;">()</span></div></div></div></foreignObject><text x="371" y="462" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">runtime. gcBgMarkWorker()</text></switch></g><path d="M 370.6 563 Q 370.6 583 370.6 575.5 Q 370.6 568 370.6 581.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 370.6 586.88 L 367.1 579.88 L 370.6 581.63 L 374.1 579.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="270.52" y="518" width="200" height="45" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 541px; margin-left: 272px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">将处理器和线程打包成 parkInfo 类型的结构体</font></div></div></div></foreignObject><text x="371" y="544" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">将处理器和线程打包成 parkInfo 类型的结构体</text></switch></g><path d="M 370.6 633 Q 370.6 653 370.6 656.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 370.61 661.88 L 367.1 654.88 L 370.6 656.63 L 374.1 654.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 640px; margin-left: 373px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">唤醒</div></div></div></foreignObject><text x="373" y="643" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">唤醒</text></switch></g><rect x="270.52" y="588" width="200" height="45" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 611px; margin-left: 272px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">进入休眠等待垃圾收集控制器或者调度器唤醒</font></div></div></div></foreignObject><text x="371" y="614" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">进入休眠等待垃圾收集控制器或者调度器唤醒</text></switch></g><path d="M 280.14 703 Q 280.14 703 224.87 703" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 219.62 703 L 226.62 699.5 L 224.87 703 L 226.62 706.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 704px; margin-left: 253px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><font face="Comic Sans MS">专属模式</font></div></div></div></foreignObject><text x="253" y="707" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">专属模式</text></switch></g><path d="M 460.14 703 Q 460.14 703 589.63 703" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 594.88 703 L 587.88 706.5 L 589.63 703 L 587.88 699.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 704px; margin-left: 530px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><font face="Comic Sans MS">空闲模式</font></div></div></div></foreignObject><text x="530" y="707" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">空闲模式</text></switch></g><path d="M 370.2 742.97 Q 370.2 763 370.4 763 Q 370.6 763 370.6 771.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 370.6 776.88 L 367.1 769.88 L 370.6 771.63 L 374.1 769.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 754px; margin-left: 369px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><font face="Comic Sans MS">部分模式</font></div></div></div></foreignObject><text x="369" y="757" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">部分模式</text></switch></g><path d="M 370.14 663 L 460.14 703 L 370.14 743 L 280.14 703 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 703px; margin-left: 281px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">检查处理器模式<br />（ p.gcMarkWorkerMode）</font></div></div></div></foreignObject><text x="370" y="707" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">检查处理器模式&#xa;（ p.gcMarkWorkerMode）</text></switch></g><path d="M 137.2 725.5 Q 137.2 745.6 137.2 740.8 Q 137.2 736 137.2 749.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 137.2 754.88 L 133.7 747.88 L 137.2 749.63 L 140.7 747.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="56" y="680.5" width="162.5" height="45" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 161px; height: 1px; padding-top: 703px; margin-left: 57px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">调用 runtime.gcDrain() 扫描工作缓冲区（允许抢占）</font></div></div></div></foreignObject><text x="137" y="707" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.gcDrain() 扫描工作缓冲区（允许抢占）</text></switch></g><path d="M 137.2 811 Q 137.2 831 137.2 828.5 Q 137.2 826 137.2 839.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 137.2 844.88 L 133.7 837.88 L 137.2 839.63 L 140.7 837.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="58.5" y="756" width="157.5" height="55" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 156px; height: 1px; padding-top: 784px; margin-left: 60px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">如果被抢占，则把当前处理器的所有可运行 goroutine 移到全局可运行队列中</font></div></div></div></foreignObject><text x="137" y="787" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果被抢占，则把当前处理器的所有可运行 goroutine 移到全局可运行队列中</text></switch></g><path d="M 137.25 891 Q 137.4 923.6 278.67 923.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 283.92 923.5 L 276.92 927.01 L 278.67 923.5 L 276.92 920.01 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="58.5" y="846" width="157.5" height="45" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 156px; height: 1px; padding-top: 869px; margin-left: 60px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">调用 runtime.gcDrain() 扫描工作缓冲区（不允许抢占）</span></div></div></div></foreignObject><text x="137" y="872" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.gcDrain() 扫描工作缓冲区（不允许抢占）</text></switch></g><path d="M 656 725.5 Q 656 923.6 462.37 923.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 457.12 923.5 L 464.12 920 L 462.37 923.5 L 464.12 927 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="596" y="680.5" width="120" height="45" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 703px; margin-left: 597px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">调用 runtime.gcDrain() 扫描工作缓冲区</span></div></div></div></foreignObject><text x="656" y="707" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.gcDrain() 扫描工作缓冲区</text></switch></g><path d="M 370.52 833 Q 370.52 833 370.52 889.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 370.52 894.88 L 367.02 887.88 L 370.52 889.63 L 374.02 887.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="300.9" y="778" width="139.24" height="55" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 137px; height: 1px; padding-top: 806px; margin-left: 302px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">调用 runtime.gcDrain() 扫描工作缓冲区</span></div></div></div></foreignObject><text x="371" y="809" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.gcDrain() 扫描工作缓冲区</text></switch></g><path d="M 370.6 951 Q 370.6 971 370.6 966 Q 370.6 961 370.6 974.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 370.6 979.88 L 367.1 972.88 L 370.6 974.63 L 374.1 972.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="285.04" y="896" width="170.96" height="55" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 169px; height: 1px; padding-top: 924px; margin-left: 286px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">垃圾收集的标记阶段结束（所有后台工作任务都陷入等待并且没有剩余工作）</font></div></div></div></foreignObject><text x="371" y="927" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">垃圾收集的标记阶段结束（所有后台工作任务都陷入等待并且没有剩余工作）</text></switch></g><rect x="285.04" y="981" width="170.96" height="55" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 169px; height: 1px; padding-top: 1009px; margin-left: 286px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">调用 runtime.gcMarkDone() 进入标记终止阶段</font></div></div></div></foreignObject><text x="371" y="1012" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.gcMarkDone() 进入标记终止阶段</text></switch></g><path d="M 996.2 863 Q 996.2 835.6 995.9 835.6 Q 995.6 835.6 995.6 814.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 995.6 809.12 L 999.1 816.12 L 995.6 814.37 L 992.1 816.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 996.2 953 Q 996.2 983 995.9 983 Q 995.6 983 995.6 1006.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 995.6 1011.88 L 992.1 1004.88 L 995.6 1006.63 L 999.1 1004.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1135.63 908 Q 1135.63 908 1192.25 908" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1197.5 908 L 1190.5 911.5 L 1192.25 908 L 1190.5 904.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 856.63 863 L 856.63 863.09 L 866.59 862.43 L 876.56 862.68 L 886.52 862.46 L 896.49 862.52 L 906.45 863.43 L 916.42 862.33 L 926.38 863.73 L 936.34 863.22 L 946.31 862.9 L 956.27 862.39 L 966.24 863.21 L 976.2 863.14 L 986.17 863.71 L 996.13 863.1 L 1006.09 862.71 L 1016.06 862.57 L 1026.02 863.15 L 1035.99 863.75 L 1045.95 863.48 L 1055.92 862.74 L 1065.88 863.29 L 1075.84 862.53 L 1085.81 863.11 L 1095.77 863.06 L 1105.74 862.39 L 1115.7 862.72 L 1125.67 862.85 L 1135.63 863 L 1135.36 863 L 1135.75 873 L 1135.01 883 L 1135.24 893 L 1136 903 L 1135.76 913 L 1135.58 923 L 1135.09 933 L 1136.22 943 L 1135.63 953 L 1135.63 952.74 L 1125.67 952.59 L 1115.7 952.92 L 1105.74 952.64 L 1095.77 952.29 L 1085.81 953.62 L 1075.84 952.61 L 1065.88 952.34 L 1055.92 953.49 L 1045.95 953.4 L 1035.99 952.27 L 1026.02 953.54 L 1016.06 953.55 L 1006.09 953.64 L 996.13 953.03 L 986.17 953.56 L 976.2 953.08 L 966.24 952.54 L 956.27 953.24 L 946.31 952.95 L 936.34 952.32 L 926.38 952.44 L 916.42 952.89 L 906.45 952.62 L 896.49 953.41 L 886.52 952.69 L 876.56 953.17 L 866.59 952.8 L 856.63 953 L 856.94 953 L 856.07 943 L 856.19 933 L 856.39 923 L 856.14 913 L 856.5 903 L 857.12 893 L 856.98 883 L 856.13 873 L 856.63 863 L 856.63 863 Z Z" fill="#dae8fc" stroke="#6c8ebf" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 271px; height: 1px; padding-top: 853px; margin-left: 862px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font face="Comic Sans MS">p.gcMarkWorkerMode</font></h1><p><font face="Comic Sans MS">表示并发扫描对象的工作 goroutine 的模式。</font></p></div></div></div></foreignObject><text x="862" y="865" fill="#000000" font-family="Helvetica" font-size="12px">p.gcMarkWorkerMode...</text></switch></g><path d="M 816 663 L 816 662.76 L 825.97 662.27 L 835.94 663.35 L 845.92 663.48 L 855.89 662.86 L 865.86 662.45 L 875.83 662.55 L 885.81 663.45 L 895.78 662.79 L 905.75 662.67 L 915.72 663.16 L 925.69 662.68 L 935.67 662.75 L 945.64 663.68 L 955.61 662.91 L 965.58 662.6 L 975.56 663.37 L 985.53 662.79 L 995.5 662.67 L 1005.47 662.48 L 1015.44 662.34 L 1025.42 662.54 L 1035.39 663.28 L 1045.36 663.07 L 1055.33 662.8 L 1065.31 663.14 L 1075.28 663.31 L 1085.25 662.77 L 1095.22 662.55 L 1105.19 663.09 L 1115.17 662.97 L 1125.14 662.6 L 1135.11 662.94 L 1145.08 663.35 L 1155.06 662.99 L 1165.03 663.38 L 1175 663 L 1174.45 663 L 1175.19 672.67 L 1175.29 682.33 L 1175.09 692 L 1174.48 701.67 L 1174.31 711.33 L 1175.31 721 L 1174.81 730.67 L 1175.04 740.33 L 1174.45 750 L 1174.95 759.67 L 1175.31 769.33 L 1174.4 779 L 1175.26 788.67 L 1175.66 798.33 L 1175 808 L 1175 808.18 L 1165.03 807.75 L 1155.06 807.87 L 1145.08 807.67 L 1135.11 807.83 L 1125.14 807.73 L 1115.17 807.56 L 1105.19 807.37 L 1095.22 807.74 L 1085.25 807.58 L 1075.28 807.31 L 1065.31 808.28 L 1055.33 807.7 L 1045.36 808 L 1035.39 807.85 L 1025.42 808.29 L 1015.44 807.61 L 1005.47 807.89 L 995.5 807.99 L 985.53 808.28 L 975.56 808.56 L 965.58 807.52 L 955.61 807.37 L 945.64 807.54 L 935.67 808.58 L 925.69 808.48 L 915.72 808.4 L 905.75 808.13 L 895.78 807.27 L 885.81 808.6 L 875.83 808.23 L 865.86 808.73 L 855.89 807.91 L 845.92 807.4 L 835.94 807.81 L 825.97 808.46 L 816 808 L 815.36 808 L 816.05 798.33 L 816.37 788.67 L 815.61 779 L 815.47 769.33 L 816.75 759.67 L 816.16 750 L 815.49 740.33 L 815.88 730.67 L 816.49 721 L 816.59 711.33 L 816.09 701.67 L 815.62 692 L 815.92 682.33 L 816.14 672.67 L 816 663 L 816 663 Z Z" fill="#d5e8d4" stroke="#82b366" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 351px; height: 1px; padding-top: 653px; margin-left: 821px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 155px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font face="Comic Sans MS">gcMarkWorkerDedicatedMode</font></h1><p><font face="Comic Sans MS">专属模式。运行 gcMarkWorker 处理器专门负责标记对象，不会被调度器抢占。</font></p><p><font face="Comic Sans MS">① 在 runtime.gcController.findRunnableGCWorker() 中，当 runtime.gcController.dedicatedMarkWorkersNeeded - 1 &gt;= 0 时，会设置处理器为当前模式</font></p><span style="font-family: &quot;comic sans ms&quot;"><br /></span></div></div></div></foreignObject><text x="821" y="665" fill="#000000" font-family="Helvetica" font-size="12px">gcMarkWorkerDedicatedMode...</text></switch></g><path d="M 1198.62 833 L 1198.62 833.13 L 1208.62 833.52 L 1218.62 832.51 L 1228.62 832.62 L 1238.62 833.46 L 1248.62 833.16 L 1258.62 833.43 L 1268.62 833.55 L 1278.62 832.47 L 1288.62 833.53 L 1298.62 832.28 L 1308.62 833.58 L 1318.62 832.49 L 1328.62 832.33 L 1338.62 832.44 L 1348.62 832.7 L 1358.62 832.79 L 1368.62 832.65 L 1378.62 833.41 L 1388.62 833.61 L 1398.62 833.19 L 1408.62 833.39 L 1418.62 832.47 L 1428.62 833.35 L 1438.62 832.65 L 1448.62 832.62 L 1458.62 832.63 L 1468.62 833.56 L 1478.62 832.79 L 1488.62 832.92 L 1498.62 833.03 L 1508.62 833.27 L 1518.62 832.35 L 1528.62 832.66 L 1538.62 833.04 L 1548.62 833.18 L 1558.62 832.6 L 1568.62 832.52 L 1578.62 833.61 L 1588.62 833.33 L 1598.62 833 L 1598.81 833 L 1599.33 843 L 1597.9 853 L 1599.2 863 L 1598.73 873 L 1599.33 883 L 1598.39 893 L 1599.31 903 L 1598.07 913 L 1599.35 923 L 1598.75 933 L 1598.37 943 L 1598.38 953 L 1598.07 963 L 1598.67 973 L 1598.62 983 L 1598.62 982.52 L 1588.62 983.62 L 1578.62 982.44 L 1568.62 982.75 L 1558.62 982.6 L 1548.62 983.12 L 1538.62 983.01 L 1528.62 982.71 L 1518.62 983.61 L 1508.62 983.22 L 1498.62 983.52 L 1488.62 983.21 L 1478.62 983.06 L 1468.62 983 L 1458.62 982.69 L 1448.62 983.04 L 1438.62 983.44 L 1428.62 982.82 L 1418.62 982.82 L 1408.62 982.54 L 1398.62 983.65 L 1388.62 982.81 L 1378.62 982.89 L 1368.62 983.22 L 1358.62 982.52 L 1348.62 982.95 L 1338.62 983.54 L 1328.62 982.9 L 1318.62 982.36 L 1308.62 983.58 L 1298.62 982.93 L 1288.62 982.48 L 1278.62 982.56 L 1268.62 983.56 L 1258.62 982.47 L 1248.62 983.5 L 1238.62 982.99 L 1228.62 982.88 L 1218.62 983.52 L 1208.62 982.81 L 1198.62 983 L 1199.31 983 L 1198.62 973 L 1198.48 963 L 1199.08 953 L 1198.03 943 L 1197.88 933 L 1198.51 923 L 1198.7 913 L 1198.41 903 L 1198.7 893 L 1198.16 883 L 1198 873 L 1198.77 863 L 1198.39 853 L 1199.19 843 L 1198.62 833 L 1198.62 833 Z Z" fill="#d5e8d4" stroke="#82b366" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 392px; height: 1px; padding-top: 823px; margin-left: 1204px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 160px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font face="Comic Sans MS">gcMarkWorkerFractionalMode</font></h1><p><font face="Comic Sans MS">部分模式。表示处理器当前进行“fractional” 标记。当 GOMAXPROCS * gcBackgroundUtilization 不是一个整数的时候，需要 "fractional worker"。</font></p><p><span style="font-family: &quot;comic sans ms&quot;">① 在 runtime.gcController.findRunnableGCWorker() 中，会基于 runtime.gcController.fractionalUtilizationGoal 设置处理器为当前模式</span></p><span style="font-family: &quot;comic sans ms&quot;"><br /></span></div></div></div></foreignObject><text x="1204" y="835" fill="#000000" font-family="Helvetica" font-size="12px">gcMarkWorkerFractionalMode...</text></switch></g><path d="M 844.5 1013 L 844.5 1012.69 L 854.57 1013.11 L 864.63 1013.21 L 874.7 1013.53 L 884.77 1013.24 L 894.83 1013 L 904.9 1013.42 L 914.97 1013.66 L 925.03 1013.53 L 935.1 1012.28 L 945.17 1012.8 L 955.23 1013.43 L 965.3 1012.3 L 975.37 1013.61 L 985.43 1012.27 L 995.5 1012.57 L 1005.57 1012.91 L 1015.63 1013.47 L 1025.7 1013.11 L 1035.77 1012.53 L 1045.83 1012.49 L 1055.9 1012.55 L 1065.97 1013.24 L 1076.03 1013.5 L 1086.1 1013.47 L 1096.17 1012.97 L 1106.23 1012.57 L 1116.3 1013.57 L 1126.37 1012.53 L 1136.43 1012.52 L 1146.5 1013 L 1145.78 1013 L 1145.95 1023 L 1146.15 1033 L 1146.11 1043 L 1146.57 1053 L 1146.02 1063 L 1146.89 1073 L 1146.65 1083 L 1146.97 1093 L 1146.76 1103 L 1146.29 1113 L 1146.54 1123 L 1146.5 1133 L 1146.5 1132.37 L 1136.43 1132.88 L 1126.37 1133.64 L 1116.3 1132.92 L 1106.23 1133.2 L 1096.17 1132.7 L 1086.1 1133.7 L 1076.03 1132.73 L 1065.97 1132.6 L 1055.9 1132.76 L 1045.83 1133.23 L 1035.77 1132.42 L 1025.7 1133.65 L 1015.63 1133.17 L 1005.57 1133.22 L 995.5 1133.62 L 985.43 1133.31 L 975.37 1133.66 L 965.3 1133.03 L 955.23 1133.24 L 945.17 1133.13 L 935.1 1133.61 L 925.03 1132.43 L 914.97 1132.74 L 904.9 1133.63 L 894.83 1133.67 L 884.77 1133.28 L 874.7 1132.61 L 864.63 1132.85 L 854.57 1132.49 L 844.5 1133 L 845.13 1133 L 844.9 1123 L 844.54 1113 L 844.58 1103 L 844.11 1093 L 844.34 1083 L 844.07 1073 L 844.74 1063 L 843.96 1053 L 843.79 1043 L 844.69 1033 L 843.88 1023 L 844.5 1013 L 844.5 1013 Z Z" fill="#d5e8d4" stroke="#82b366" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 294px; height: 1px; padding-top: 1003px; margin-left: 850px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 130px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font face="Comic Sans MS">gcMarkWorkerIdleMode</font></h1><p><font face="Comic Sans MS">空闲模式。表示处理器没有其他可执行的 goroutine，所以它会运行垃圾收集的标记任务直至被抢占</font></p><p><font face="Comic Sans MS">① 在 runtime.findrunnable() 中可能会设置这种模式<br /></font></p></div></div></div></foreignObject><text x="850" y="1015" fill="#000000" font-family="Helvetica" font-size="12px">gcMarkWorkerIdleMode...</text></switch></g><path d="M 481.4 1820 Q 481.4 1840 481.4 1835 Q 481.4 1830 481.4 1843.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 481.4 1848.88 L 477.9 1841.88 L 481.4 1843.63 L 484.9 1841.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="377.05" y="1790" width="208.52" height="30" rx="4.5" ry="4.5" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 207px; height: 1px; padding-top: 1805px; margin-left: 378px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">runtime.gcDrain</span><span style="font-family: &quot;comic sans ms&quot;">(p.gcWork, flags)</span></div></div></div></foreignObject><text x="481" y="1809" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">runtime.gcDrain(p.gcWork, flags)</text></switch></g><path d="M 560.17 1877.5 Q 560.17 1877.5 663.8 1877.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 669.05 1877.5 L 662.05 1881 L 663.8 1877.5 L 662.05 1874 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1879px; margin-left: 612px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><span style="font-family: &quot;comic sans ms&quot;">gcDrainIdle</span></div></div></div></foreignObject><text x="612" y="1882" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">gcDrainIdle</text></switch></g><path d="M 481.31 1905 Q 481.31 1905 481.31 1948.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 481.31 1953.88 L 477.81 1946.88 L 481.31 1948.63 L 484.81 1946.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1922px; margin-left: 481px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><font face="Comic Sans MS">gcDrainFractional</font></div></div></div></foreignObject><text x="481" y="1925" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">gcDrainFractional</text></switch></g><path d="M 402.45 1877.5 Q 350.2 1877.6 350.2 1970.1 Q 350.2 2062.6 366.08 2062.53" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 371.33 2062.51 L 364.35 2066.04 L 366.08 2062.53 L 364.32 2059.04 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1912px; margin-left: 360px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">其他</div></div></div></foreignObject><text x="360" y="1916" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">其他</text></switch></g><rect x="402.45" y="1850" width="157.72" height="55" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 156px; height: 1px; padding-top: 1878px; margin-left: 403px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">根据 flags 设置检查是否应该退出标记任务并让出处理器的函数</font></div></div></div></foreignObject><text x="481" y="1881" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">根据 flags 设置检查是否应该退出标记任务并让出处理器的函数</text></switch></g><path d="M 481.31 2000 Q 481.31 2000 481.31 2033.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 481.31 2038.88 L 477.81 2031.88 L 481.31 2033.63 L 484.81 2031.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="372.45" y="1955" width="217.72" height="45" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 216px; height: 1px; padding-top: 1978px; margin-left: 373px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">设置检查函数为 runtime.</font><span style="font-family: &quot;comic sans ms&quot;">pollFractionalWorkerExit</span><font face="Comic Sans MS">()</font></div></div></div></foreignObject><text x="481" y="1981" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">设置检查函数为 runtime.pollFractionalWorkerExit()</text></switch></g><path d="M 481.31 2085 Q 481.31 2085 481.31 2103.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 481.31 2108.88 L 477.81 2101.88 L 481.31 2103.63 L 484.81 2101.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="372.45" y="2040" width="217.72" height="45" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 216px; height: 1px; padding-top: 2063px; margin-left: 373px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">调用 runtime.markroot() 扫描全局变量中的根对象。每次扫描都会调用检查函数确定是否中断</font></div></div></div></foreignObject><text x="481" y="2066" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.markroot() 扫描全局变量中的根对象。每次扫描都会调用检查函数确定是否中断</text></switch></g><path d="M 481.4 2155 Q 481.4 2175 481.4 2172.5 Q 481.4 2170 481.4 2183.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 481.4 2188.88 L 477.9 2181.88 L 481.4 2183.63 L 484.9 2181.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2167px; margin-left: 483px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">否</div></div></div></foreignObject><text x="483" y="2170" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">否</text></switch></g><path d="M 590.17 2132.5 Q 640.2 2132.6 640.2 2377.6 Q 640.2 2622.6 596.54 2622.51" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 591.29 2622.5 L 598.29 2619.02 L 596.54 2622.51 L 598.28 2626.02 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2152px; margin-left: 611px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">是</div></div></div></foreignObject><text x="611" y="2155" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">是</text></switch></g><rect x="372.45" y="2110" width="217.72" height="45" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 216px; height: 1px; padding-top: 2133px; margin-left: 373px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">判断是否在设置了抢占 flag 的情况下 goroutine 被抢占了 </font></div></div></div></foreignObject><text x="481" y="2136" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">判断是否在设置了抢占 flag 的情况下 goroutine 被抢占了 </text></switch></g><path d="M 481.4 2235 Q 481.4 2255 481.4 2252.5 Q 481.4 2250 481.4 2263.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 481.4 2268.88 L 477.9 2261.88 L 481.4 2263.63 L 484.9 2261.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="372.45" y="2190" width="217.72" height="45" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 216px; height: 1px; padding-top: 2213px; margin-left: 373px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">在需要的情况下调用 gcWork.balance() 将一部分的工作放回全局队列中</font></div></div></div></foreignObject><text x="481" y="2216" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">在需要的情况下调用 gcWork.balance() 将一部分的工作放回全局队列中</text></switch></g><path d="M 481.4 2315 Q 481.4 2335 481.4 2332.5 Q 481.4 2330 481.4 2343.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 481.4 2348.88 L 477.9 2341.88 L 481.4 2343.63 L 484.9 2341.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2326px; margin-left: 484px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">获取到</div></div></div></foreignObject><text x="484" y="2329" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">获取到</text></switch></g><path d="M 590.17 2292.5 Q 610.2 2292.6 610.2 2457.6 Q 610.2 2622.6 596.54 2622.53" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 591.29 2622.51 L 598.31 2619.04 L 596.54 2622.53 L 598.27 2626.04 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2322px; margin-left: 605px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">获取不到</div></div></div></foreignObject><text x="605" y="2325" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">获取不到</text></switch></g><rect x="372.45" y="2270" width="217.72" height="45" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 216px; height: 1px; padding-top: 2293px; margin-left: 373px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">调用 gcWork.tryGetFast() / gcWork.tryGet() 获取一个对象</font></div></div></div></foreignObject><text x="481" y="2296" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 gcWork.tryGetFast() / gcWork.tryGet...</text></switch></g><path d="M 481.4 2395 Q 481.4 2415 481.4 2412.5 Q 481.4 2410 481.4 2423.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 481.4 2428.88 L 477.9 2421.88 L 481.4 2423.63 L 484.9 2421.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="372.45" y="2350" width="217.72" height="45" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 216px; height: 1px; padding-top: 2373px; margin-left: 373px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">调用 gcWork.scanobject() 从上一步获取到的对象开始扫描对象</font></div></div></div></foreignObject><text x="481" y="2376" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 gcWork.scanobject() 从上一步获取到的对象开始扫描对象</text></switch></g><path d="M 481.4 2475 Q 481.4 2495 481.4 2492.5 Q 481.4 2490 481.4 2503.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 481.4 2508.88 L 477.9 2501.88 L 481.4 2503.63 L 484.9 2501.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="372.45" y="2430" width="217.72" height="45" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 216px; height: 1px; padding-top: 2453px; margin-left: 373px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">在适当的情况下调用 runtime.gcFlushBgCredit() 记录这次扫描的内存字节数</font></div></div></div></foreignObject><text x="481" y="2456" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">在适当的情况下调用 runtime.gcFlushBgCredit() 记录这次扫描的内存字节数</text></switch></g><path d="M 481.31 2555 Q 481.31 2555 481.31 2593.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 481.31 2598.88 L 477.81 2591.88 L 481.31 2593.63 L 484.81 2591.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2566px; margin-left: 485px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">是</div></div></div></foreignObject><text x="485" y="2569" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">是</text></switch></g><path d="M 372.45 2532.5 Q 330.2 2532.6 330.2 2332.6 Q 330.2 2132.6 366.08 2132.52" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 371.33 2132.5 L 364.34 2136.02 L 366.08 2132.52 L 364.32 2129.02 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2474px; margin-left: 337px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">否</div></div></div></foreignObject><text x="337" y="2477" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">否</text></switch></g><rect x="372.45" y="2510" width="217.72" height="45" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 216px; height: 1px; padding-top: 2533px; margin-left: 373px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">调用检查函数确定是否中断扫描</font></div></div></div></foreignObject><text x="481" y="2536" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用检查函数确定是否中断扫描</text></switch></g><rect x="372.45" y="2600" width="217.72" height="45" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 216px; height: 1px; padding-top: 2623px; margin-left: 373px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">runtime.gcFlushBgCredit() 记录剩余的扫描的内存字节数</span></div></div></div></foreignObject><text x="481" y="2626" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">runtime.gcFlushBgCredit() 记录剩余的扫描的内存字节数</text></switch></g><rect x="670.17" y="1855" width="140" height="45" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 1878px; margin-left: 671px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">设置检查函数为 runtime.</font><span style="font-family: &quot;comic sans ms&quot;"> pollWork</span><font face="Comic Sans MS">()</font></div></div></div></foreignObject><text x="740" y="1881" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">设置检查函数为 runtime. pollWork()</text></switch></g><path d="M 82.67 1390 L 82.67 1389.55 L 92.67 1389.33 L 102.67 1390.18 L 112.67 1389.74 L 122.67 1390.23 L 132.67 1390.66 L 142.67 1390.4 L 152.67 1390.51 L 162.67 1389.26 L 172.67 1390.27 L 182.67 1390.57 L 192.67 1389.46 L 202.67 1389.74 L 212.67 1389.45 L 222.67 1390.44 L 232.67 1389.68 L 242.67 1389.47 L 252.67 1389.38 L 262.67 1390.45 L 272.67 1390.42 L 282.67 1390.28 L 292.67 1390.02 L 302.67 1390.63 L 312.67 1390.53 L 322.67 1389.72 L 332.67 1390.04 L 342.67 1390 L 352.67 1389.3 L 362.67 1390.19 L 372.67 1389.55 L 382.67 1389.34 L 392.67 1390.1 L 402.67 1390 L 402.1 1390 L 402.61 1400 L 402.56 1410 L 402.56 1420 L 402.05 1430 L 402.32 1440 L 402.46 1450 L 403.37 1460 L 402.02 1470 L 402.82 1480 L 401.96 1490 L 402.96 1500 L 402.65 1510 L 402.12 1520 L 403.08 1530 L 402.85 1540 L 402.65 1550 L 402.41 1560 L 403.37 1570 L 402.9 1580 L 402.95 1590 L 402.27 1600 L 401.96 1610 L 402.86 1620 L 402.31 1630 L 403.05 1640 L 402.68 1650 L 402.6 1660 L 402.67 1670 L 402.67 1669.59 L 392.67 1670.5 L 382.67 1669.92 L 372.67 1670.49 L 362.67 1669.37 L 352.67 1669.99 L 342.67 1669.71 L 332.67 1669.28 L 322.67 1670.22 L 312.67 1670.39 L 302.67 1670.22 L 292.67 1670.36 L 282.67 1670.17 L 272.67 1670.34 L 262.67 1670.28 L 252.67 1670.69 L 242.67 1669.86 L 232.67 1670.4 L 222.67 1669.71 L 212.67 1669.42 L 202.67 1670.6 L 192.67 1669.53 L 182.67 1670.23 L 172.67 1670.61 L 162.67 1669.61 L 152.67 1669.45 L 142.67 1669.76 L 132.67 1669.31 L 122.67 1670.44 L 112.67 1670.72 L 102.67 1669.25 L 92.67 1670.32 L 82.67 1670 L 82.98 1670 L 81.96 1660 L 83.07 1650 L 82.27 1640 L 83.27 1630 L 82.81 1620 L 82.48 1610 L 82.26 1600 L 81.97 1590 L 83.3 1580 L 82.48 1570 L 82.58 1560 L 82.25 1550 L 82.76 1540 L 83.18 1530 L 82.24 1520 L 83.01 1510 L 82.94 1500 L 83.3 1490 L 81.98 1480 L 82.36 1470 L 82.82 1460 L 83.31 1450 L 83.15 1440 L 83.25 1430 L 83.14 1420 L 83.29 1410 L 82.4 1400 L 82.67 1390 L 82.67 1390 Z Z" fill="none" stroke="#000000" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 312px; height: 1px; padding-top: 1380px; margin-left: 88px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 290px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font face="Comic Sans MS">runtime.gcDrainFlags</font></h1><p><font face="Comic Sans MS">gcDrain() 会根据它选择不同的策略。</font></p><p><font face="Comic Sans MS">① gcDrainUntilPreempt：当设置了 goroutine 抢占标记的时候，gcDrain() 返回</font></p><p><font face="Comic Sans MS">② gcDrainFlushBgCredit：每 gcCreditSlack 个扫描工作单元，gcDrain() 都会将本次扫描的内存字节数刷新到 gcController.bgScanCredit 中，以减少辅助标记的工作量</font></p><p><font face="Comic Sans MS">③ gcDrainIdle：当处理器有其他 goroutine 要执行的时候 gcDrain() 返回</font></p><p><font face="Comic Sans MS">④ gcDrainFractional：当 runtime.pollFractionalWorkerExit() 返回 true 的时候，gcDrain() 自抢占。即表示 gcDrainNoBlock</font></p></div></div></div></foreignObject><text x="88" y="1392" fill="#000000" font-family="Helvetica" font-size="12px">runtime.gcDrainFlags...</text></switch></g><path d="M 486.29 1535 Q 486.29 1535 539.92 1535" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 545.17 1535 L 538.17 1538.5 L 539.92 1535 L 538.17 1531.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1538px; margin-left: 511px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><font face="Comic Sans MS">gcw</font></div></div></div></foreignObject><text x="511" y="1541" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">gcw</text></switch></g><ellipse cx="466.29" cy="1535" rx="20" ry="20" fill="#d80073" stroke="#a50040" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 1535px; margin-left: 447px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">P</font></div></div></div></foreignObject><text x="466" y="1539" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">P</text></switch></g><path d="M 546.29 1340 L 546.29 1339.51 L 556.29 1339.53 L 566.29 1339.93 L 576.29 1340.59 L 586.29 1340.27 L 596.29 1340.56 L 606.29 1339.58 L 616.29 1340.05 L 626.29 1340.42 L 636.29 1339.88 L 646.29 1340.23 L 656.29 1340.08 L 666.29 1340.72 L 676.29 1340.58 L 686.29 1340.36 L 696.29 1339.38 L 706.29 1339.48 L 716.29 1339.68 L 726.29 1340.72 L 736.29 1339.29 L 746.29 1339.88 L 756.29 1340.67 L 766.29 1340.34 L 776.29 1340.71 L 786.29 1339.57 L 796.29 1339.46 L 806.29 1340.21 L 816.29 1339.39 L 826.29 1339.56 L 836.29 1340.52 L 846.29 1340.55 L 856.29 1339.77 L 866.29 1340.29 L 876.29 1339.43 L 886.29 1340 L 885.56 1340 L 886.39 1350 L 885.91 1360 L 886.13 1370 L 886.21 1380 L 886.76 1390 L 886.43 1400 L 886.24 1410 L 886.73 1420 L 886.85 1430 L 885.79 1440 L 886.97 1450 L 885.6 1460 L 886.71 1470 L 885.62 1480 L 886.46 1490 L 886.13 1500 L 886.7 1510 L 886.58 1520 L 885.96 1530 L 886.52 1540 L 886.27 1550 L 886.59 1560 L 885.81 1570 L 885.9 1580 L 886.68 1590 L 886.07 1600 L 885.69 1610 L 886.98 1620 L 886.14 1630 L 885.82 1640 L 885.91 1650 L 886.09 1660 L 886.84 1670 L 887.04 1680 L 886.67 1690 L 885.57 1700 L 886.52 1710 L 886.89 1720 L 886.29 1730 L 886.29 1729.37 L 876.29 1729.52 L 866.29 1730.02 L 856.29 1729.51 L 846.29 1729.64 L 836.29 1730.26 L 826.29 1729.76 L 816.29 1730.7 L 806.29 1730.08 L 796.29 1729.26 L 786.29 1730.14 L 776.29 1730.1 L 766.29 1729.82 L 756.29 1729.83 L 746.29 1729.8 L 736.29 1730.09 L 726.29 1729.53 L 716.29 1730.17 L 706.29 1730.71 L 696.29 1730.59 L 686.29 1729.77 L 676.29 1730.68 L 666.29 1730.02 L 656.29 1729.75 L 646.29 1730.37 L 636.29 1729.95 L 626.29 1730.41 L 616.29 1729.82 L 606.29 1730.69 L 596.29 1729.36 L 586.29 1730.38 L 576.29 1730.27 L 566.29 1730.35 L 556.29 1730.22 L 546.29 1730 L 546.65 1730 L 546.25 1720 L 546.72 1710 L 546.59 1700 L 546.49 1690 L 545.78 1680 L 546.35 1670 L 545.7 1660 L 546.68 1650 L 545.69 1640 L 546.85 1630 L 546.38 1620 L 546.15 1610 L 546.68 1600 L 545.88 1590 L 545.87 1580 L 546.96 1570 L 545.7 1560 L 546.99 1550 L 546.47 1540 L 545.98 1530 L 546.68 1520 L 546.76 1510 L 546.55 1500 L 547.02 1490 L 546.2 1480 L 546.83 1470 L 546.16 1460 L 546.58 1450 L 546.36 1440 L 545.72 1430 L 546.27 1420 L 546.11 1410 L 545.76 1400 L 546.3 1390 L 545.88 1380 L 546.12 1370 L 545.96 1360 L 546.45 1350 L 546.29 1340 L 546.29 1340 Z Z" fill="#cdeb8b" stroke="#36393d" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 332px; height: 1px; padding-top: 1330px; margin-left: 551px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 400px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font face="Comic Sans MS">runtime.gcWork</font></h1><p><font face="Comic Sans MS">GC 工作池的抽象表示。实现了关于灰色对象指针的生产者/消费者模型。</font></p><p><font face="Comic Sans MS">① 写屏障、根对象扫描和栈扫描都会向工作池生产额外的灰色对象</font></p><p><font face="Comic Sans MS">② 对象的扫描过程会消费工作池中的灰色对象，将其标记成黑色，同时也可能发现灰色对象并将其加入到工作池中</font></p><p><font face="Comic Sans MS">③ 当工作池中不包含灰色对象时，扫描过程结束。</font></p><p><font face="Comic Sans MS">④ gcWork.put()：生产</font></p><p><font face="Comic Sans MS">⑤ gcWork.tryGet()：消费</font></p><p><font face="Comic Sans MS">⑥ gcWork.balance()：将处理器本地一部分工作放回全局队列中，让其他处理器处理，保证不同处理器负载的平衡</font></p><p><font face="Comic Sans MS">⑦ gcWork.wbuf1 和 gcWork.wbuf2：主工作缓冲区和备工作缓冲区。当向 gcWork 增加或者删除对象是，会先操作主缓冲区。一旦主缓冲区不足或者没有对象，就会触发主备缓冲区切换。当两个缓冲区都不足或者为空时，会从全局工作缓冲区获取对象。</font></p></div></div></div></foreignObject><text x="551" y="1342" fill="#000000" font-family="Helvetica" font-size="12px">runtime.gcWork...</text></switch></g><rect x="87.29" y="1290" width="180" height="20" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="87.29" y="1290" width="180" height="20" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 1300px; margin-left: 88px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">扫描标记对象</font></div></div></div></foreignObject><text x="177" y="1304" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">扫描标记对象</text></switch></g><path d="M 51.65 2020 L 51.65 2019.88 L 61.65 2020.47 L 71.65 2019.96 L 81.65 2020.37 L 91.65 2020.7 L 101.65 2020.03 L 111.65 2019.49 L 121.65 2019.35 L 131.65 2019.94 L 141.65 2020.66 L 151.65 2019.41 L 161.65 2020.43 L 171.65 2020.61 L 181.65 2020.21 L 191.65 2020.61 L 201.65 2019.32 L 211.65 2019.32 L 221.65 2020.49 L 231.65 2020.36 L 241.65 2019.29 L 251.65 2020.66 L 261.65 2020.24 L 271.65 2019.32 L 281.65 2019.68 L 291.65 2020.01 L 301.65 2020.01 L 311.65 2020 L 311.1 2020 L 311.01 2030 L 311.57 2040 L 311.11 2050 L 311.01 2060 L 312.13 2070 L 310.9 2080 L 311.9 2090 L 312.33 2100 L 311.17 2110 L 311.77 2120 L 310.97 2130 L 311.65 2140 L 311.65 2139.62 L 301.65 2139.42 L 291.65 2140.27 L 281.65 2140.36 L 271.65 2139.95 L 261.65 2140.28 L 251.65 2140.03 L 241.65 2139.3 L 231.65 2139.77 L 221.65 2140.5 L 211.65 2139.58 L 201.65 2140.61 L 191.65 2140.18 L 181.65 2139.77 L 171.65 2139.38 L 161.65 2139.66 L 151.65 2139.64 L 141.65 2140.34 L 131.65 2140.61 L 121.65 2140.48 L 111.65 2140.06 L 101.65 2140.15 L 91.65 2139.43 L 81.65 2139.79 L 71.65 2139.6 L 61.65 2139.48 L 51.65 2140 L 51.73 2140 L 51.39 2130 L 52.36 2120 L 52.12 2110 L 51.96 2100 L 51.6 2090 L 51.94 2080 L 51.05 2070 L 51.28 2060 L 52.06 2050 L 52.17 2040 L 52.09 2030 L 51.65 2020 L 51.65 2020 Z Z" fill="#fad7ac" stroke="#b46504" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 252px; height: 1px; padding-top: 2010px; margin-left: 57px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 130px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font face="Comic Sans MS">runtime.markroot(i)</font></h1><p><font face="Comic Sans MS">扫描第 i 个根对象。</font></p><p><font face="Comic Sans MS">该函数会扫描缓存、数据段、存放全局变量和静态变量的 BSS 段以及 goroutine 的栈内存。</font></p></div></div></div></foreignObject><text x="57" y="2022" fill="#000000" font-family="Helvetica" font-size="12px">runtime.markroot(i)...</text></switch></g><path d="M 40.17 2310 L 40.17 2309.48 L 50.22 2309.5 L 60.28 2310.39 L 70.33 2309.26 L 80.39 2310.16 L 90.44 2310.69 L 100.5 2309.78 L 110.55 2309.44 L 120.61 2309.89 L 130.66 2310.17 L 140.72 2309.52 L 150.77 2310.64 L 160.83 2309.6 L 170.88 2309.9 L 180.94 2310.04 L 190.99 2310.21 L 201.05 2310.72 L 211.1 2309.66 L 221.16 2309.87 L 231.21 2309.82 L 241.27 2310.73 L 251.32 2309.39 L 261.38 2310.02 L 271.43 2309.99 L 281.49 2310.6 L 291.54 2309.94 L 301.6 2310.32 L 311.65 2310 L 311.81 2310 L 311.98 2320 L 311.72 2330 L 311.88 2340 L 311.63 2350 L 311.56 2360 L 311.96 2370 L 311.18 2380 L 312.39 2390 L 311.16 2400 L 312.23 2410 L 311.65 2420 L 311.65 2419.66 L 301.6 2420.04 L 291.54 2420.07 L 281.49 2420.51 L 271.43 2420.46 L 261.38 2420.51 L 251.32 2419.88 L 241.27 2419.55 L 231.21 2419.47 L 221.16 2419.65 L 211.1 2420.56 L 201.05 2419.39 L 190.99 2420.55 L 180.94 2419.39 L 170.88 2420.16 L 160.83 2419.5 L 150.77 2420.7 L 140.72 2419.27 L 130.66 2419.39 L 120.61 2420.74 L 110.55 2419.69 L 100.5 2419.53 L 90.44 2419.63 L 80.39 2419.93 L 70.33 2420.36 L 60.28 2419.46 L 50.22 2420.01 L 40.17 2420 L 40.73 2420 L 40.49 2410 L 40.62 2400 L 40.27 2390 L 40.48 2380 L 40.84 2370 L 39.76 2360 L 40.3 2350 L 40.08 2340 L 40.01 2330 L 40.04 2320 L 40.17 2310 L 40.17 2310 Z Z" fill="#fad7ac" stroke="#b46504" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 263px; height: 1px; padding-top: 2300px; margin-left: 45px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 120px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font face="Comic Sans MS">runtime.scanobject(b)</font></h1><p><font face="Comic Sans MS">从 b 的位置开始扫描对象，然后调用 runtime.greyobject() 将活跃对象涂成灰色，并将对象指针添加到 gcWork 中。</font></p></div></div></div></foreignObject><text x="45" y="2312" fill="#000000" font-family="Helvetica" font-size="12px">runtime.scanobject(b)...</text></switch></g><rect x="218.5" y="378" width="78" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 76px; height: 1px; padding-top: 388px; margin-left: 220px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">① 进入点</div></div></div></foreignObject><text x="258" y="392" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">① 进入点</text></switch></g><rect x="318" y="1073" width="108" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 106px; height: 1px; padding-top: 1083px; margin-left: 319px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">② 后台标记流程</div></div></div></foreignObject><text x="372" y="1087" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">② 后台标记流程</text></switch></g><rect x="378.95" y="1740" width="108" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 106px; height: 1px; padding-top: 1750px; margin-left: 380px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">① 一些概念说明</div></div></div></foreignObject><text x="433" y="1754" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">① 一些概念说明</text></switch></g><rect x="359.31" y="2680" width="78" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 76px; height: 1px; padding-top: 2690px; margin-left: 360px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">② 扫描流程</font></div></div></div></foreignObject><text x="398" y="2694" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">② 扫描流程</text></switch></g><rect x="56" y="40" width="201" height="40" fill="#b0e3e6" stroke="#0e8088" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 60px; margin-left: 157px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 24px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap; ">标记阶段</div></div></div></foreignObject><text x="157" y="67" fill="#000000" font-family="Helvetica" font-size="24px" text-anchor="middle" font-weight="bold">标记阶段</text></switch></g><rect x="66" y="2890" width="180" height="20" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="66" y="2890" width="180" height="20" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 2900px; margin-left: 67px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">写屏障</font></div></div></div></foreignObject><text x="156" y="2904" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">写屏障</text></switch></g><path d="M 69 2930 L 69 2929.47 L 78.88 2929.46 L 88.77 2930.08 L 98.65 2930.73 L 108.54 2929.95 L 118.42 2930.49 L 128.31 2930.52 L 138.19 2930.14 L 148.08 2930.11 L 157.96 2929.95 L 167.85 2929.33 L 177.73 2929.86 L 187.62 2930.07 L 197.5 2929.64 L 207.38 2930.36 L 217.27 2930.74 L 227.15 2929.27 L 237.04 2930.24 L 246.92 2929.33 L 256.81 2930.11 L 266.69 2929.75 L 276.58 2929.81 L 286.46 2929.61 L 296.35 2929.49 L 306.23 2930.42 L 316.12 2929.33 L 326 2930 L 325.62 2930 L 326.31 2940 L 326.29 2950 L 325.27 2960 L 325.3 2970 L 325.29 2980 L 326.02 2990 L 326.42 3000 L 326.2 3010 L 326 3020 L 326 3019.76 L 316.12 3020.25 L 306.23 3020.08 L 296.35 3019.6 L 286.46 3020.68 L 276.58 3020.49 L 266.69 3020.66 L 256.81 3020.71 L 246.92 3019.34 L 237.04 3019.4 L 227.15 3020.06 L 217.27 3019.94 L 207.38 3019.95 L 197.5 3020.32 L 187.62 3019.55 L 177.73 3020.7 L 167.85 3020.54 L 157.96 3020.11 L 148.08 3019.67 L 138.19 3019.76 L 128.31 3019.5 L 118.42 3019.62 L 108.54 3020.07 L 98.65 3020.49 L 88.77 3020.28 L 78.88 3020.28 L 69 3020 L 68.33 3020 L 68.65 3010 L 69.66 3000 L 69.49 2990 L 68.98 2980 L 69.31 2970 L 69.71 2960 L 68.7 2950 L 68.43 2940 L 69 2930 L 69 2930 Z Z" fill="#d5e8d4" stroke="#82b366" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 249px; height: 1px; padding-top: 2920px; margin-left: 74px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font face="Comic Sans MS">什么时候需要写屏障？</font></h1><p><font face="Comic Sans MS">处于标记阶段（_GCmark）或者标记终止阶段（_GCmarktermination）时。</font></p></div></div></div></foreignObject><text x="74" y="2932" fill="#000000" font-family="Helvetica" font-size="12px">什么时候需要写屏障？&#xa;处于标记阶段（_GCmark）或者标记终止阶段（_GCmarktermination）时。</text></switch></g><path d="M 358.28 2930 L 358.28 2929.6 L 368.16 2929.95 L 378.05 2930.21 L 387.93 2930.68 L 397.82 2930.06 L 407.7 2929.76 L 417.59 2930.37 L 427.47 2930.57 L 437.36 2929.71 L 447.24 2929.4 L 457.13 2930.34 L 467.01 2930.38 L 476.9 2929.29 L 486.78 2930.06 L 496.66 2930.26 L 506.55 2929.38 L 516.43 2930.29 L 526.32 2930.05 L 536.2 2929.44 L 546.09 2929.64 L 555.97 2930.56 L 565.86 2930.33 L 575.74 2929.35 L 585.63 2929.44 L 595.51 2930.17 L 605.4 2929.51 L 615.28 2930 L 615.46 2930 L 615.07 2940 L 615.38 2950 L 615.65 2960 L 615.88 2970 L 615.13 2980 L 615.68 2990 L 615.87 3000 L 615.28 3010 L 615.28 3020 L 615.28 3020.51 L 605.4 3019.48 L 595.51 3019.98 L 585.63 3020.01 L 575.74 3020.5 L 565.86 3020.4 L 555.97 3020.54 L 546.09 3020.23 L 536.2 3019.68 L 526.32 3020.71 L 516.43 3019.39 L 506.55 3020.46 L 496.66 3020.43 L 486.78 3019.76 L 476.9 3020.65 L 467.01 3019.31 L 457.13 3020.32 L 447.24 3019.47 L 437.36 3019.91 L 427.47 3019.39 L 417.59 3019.4 L 407.7 3019.93 L 397.82 3019.35 L 387.93 3020.31 L 378.05 3020.72 L 368.16 3020.49 L 358.28 3020 L 358.95 3020 L 358.09 3010 L 358.99 3000 L 357.79 2990 L 358.69 2980 L 358.61 2970 L 358.43 2960 L 357.75 2950 L 358.72 2940 L 358.28 2930 L 358.28 2930 Z Z" fill="#d5e8d4" stroke="#82b366" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 249px; height: 1px; padding-top: 2920px; margin-left: 363px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font face="Comic Sans MS">什么时候开启写屏障？</font></h1><p><font face="Comic Sans MS">在需要写屏障，或者对于 cgo 检查需要写屏障（debug.cgocheck&gt;1）的时候。</font></p></div></div></div></foreignObject><text x="363" y="2932" fill="#000000" font-family="Helvetica" font-size="12px">什么时候开启写屏障？&#xa;在需要写屏障，或者对于 cgo 检查需要写屏障（debug.cgocheck&gt;1）的时候。</text></switch></g><rect x="75" y="3090" width="416" height="220" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 408px; height: 1px; padding-top: 3080px; margin-left: 80px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 230px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><h1><font face="Comic Sans MS">compile/internal/ssa.writebarrier()</font></h1><p><font face="Comic Sans MS">在编译期 SSA 中间代码生成阶段，对于存储（Store / Move / Zero）操作，加入写屏障：</font></p><p><font face="Comic Sans MS">if writeBarrier.enabled {</font></p><p><font face="Comic Sans MS">   gcWriteBarrier(ptr, val)<span>	</span>// Not a regular Go call</font></p><p><font face="Comic Sans MS">} else {</font></p><p><font face="Comic Sans MS">   *ptr = val</font></p><p><font face="Comic Sans MS"></font></p><p><font face="Comic Sans MS">}</font></p></div></div></div></foreignObject><text x="80" y="3092" fill="#000000" font-family="Helvetica" font-size="12px">compile/internal/ssa.writebarrier()...</text></switch></g><path d="M 679.4 3150 Q 679.4 3170 679.4 3162.5 Q 679.4 3155 679.4 3168.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 679.4 3173.88 L 675.9 3166.88 L 679.4 3168.63 L 682.9 3166.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="575.12" y="3120" width="208.52" height="30" rx="4.5" ry="4.5" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 207px; height: 1px; padding-top: 3135px; margin-left: 576px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">runtime.gcWriteBarrier</span><span style="font-family: &quot;comic sans ms&quot;">(ptr, val)</span></div></div></div></foreignObject><text x="679" y="3139" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">runtime.gcWriteBarrier(ptr, val)</text></switch></g><rect x="579.64" y="3175" width="199.48" height="65" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 197px; height: 1px; padding-top: 3208px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">调用 runtime.wbBufFlush() 通知垃圾收集器将原值和新值加入到当前处理器的工作队列</font></div></div></div></foreignObject><text x="679" y="3211" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.wbBufFlush() 通知垃圾收集器将原值和新值加入到当前处理器的工作队列</text></switch></g><rect x="775.12" y="3110" width="54" height="20" fill="#d0cee2" stroke="#56517e" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 52px; height: 1px; padding-top: 3120px; margin-left: 776px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">汇编实现</div></div></div></foreignObject><text x="802" y="3124" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">汇编实现</text></switch></g><rect x="306" y="3040" width="78" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 76px; height: 1px; padding-top: 3050px; margin-left: 307px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">① 时机</font></div></div></div></foreignObject><text x="345" y="3054" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">① 时机</text></switch></g><rect x="232.9" y="3320" width="78" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 76px; height: 1px; padding-top: 3330px; margin-left: 234px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">② 编译时</font></div></div></div></foreignObject><text x="272" y="3334" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">② 编译时</text></switch></g><rect x="648" y="3320" width="78" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 76px; height: 1px; padding-top: 3330px; margin-left: 649px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">③ 运行时</font></div></div></div></foreignObject><text x="687" y="3334" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">③ 运行时</text></switch></g><path d="M 216 3430 Q 216 3430 358.41 3430" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 363.66 3430 L 356.66 3433.5 L 358.41 3430 L 356.66 3426.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3431px; margin-left: 282px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><font face="Comic Sans MS">gcphase != _GCoff</font></div></div></div></foreignObject><text x="282" y="3434" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">gcphase != _GCoff</text></switch></g><rect x="96" y="3400" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 3430px; margin-left: 97px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">runtime.mallocgc()</font></div></div></div></foreignObject><text x="156" y="3434" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">runtime.mallocgc()</text></switch></g><path d="M 450.4 3460 Q 450.4 3480 450.3 3480 Q 450.2 3480 450.2 3483.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 450.2 3488.88 L 446.7 3481.88 L 450.2 3483.63 L 453.7 3481.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="364.78" y="3400" width="171.22" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 169px; height: 1px; padding-top: 3430px; margin-left: 366px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">将新创建对象涂成黑色：runtime.gcmarknewobject()</font></div></div></div></foreignObject><text x="450" y="3434" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">将新创建对象涂成黑色：runtime.gcmarknewobject()</text></switch></g><path d="M 450.2 3550 Q 450.2 3570 450.2 3565 Q 450.2 3560 450.2 3573.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 450.2 3578.88 L 446.7 3571.88 L 450.2 3573.63 L 453.7 3571.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="364.51" y="3490" width="171.22" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 169px; height: 1px; padding-top: 3520px; margin-left: 366px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">调用 runtime.markBitsForAddr() 获取对象对应的内存单元及标记位</font></div></div></div></foreignObject><text x="450" y="3524" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.markBitsForAddr() 获取对象对应的内存单元及标记位</text></switch></g><rect x="364.51" y="3580" width="171.22" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 169px; height: 1px; padding-top: 3610px; margin-left: 366px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">调用 runtime.markBits.setMarked() 将新对象涂成黑色</font></div></div></div></foreignObject><text x="450" y="3614" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.markBits.setMarked(...</text></switch></g><rect x="158" y="3580" width="148" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 146px; height: 1px; padding-top: 3590px; margin-left: 159px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">④ 分配新对象时直接涂黑</font></div></div></div></foreignObject><text x="232" y="3594" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">④ 分配新对象时直接涂黑</text></switch></g><rect x="65.12" y="3790" width="180" height="20" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="65.12" y="3790" width="180" height="20" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 3800px; margin-left: 66px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">标记辅助</font></div></div></div></foreignObject><text x="155" y="3804" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">标记辅助</text></switch></g><rect x="65.12" y="3830" width="327" height="60" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 325px; height: 1px; padding-top: 3860px; margin-left: 66px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">目的：保证用户程序分配内存的速度 &lt;= 后台任务的标记速度<br /><br />原则：分配多少内存就需要完成多少标记任务<br /></font></div></div></div></foreignObject><text x="229" y="3864" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">目的：保证用户程序分配内存的速度 &lt;= 后台任务的标记速度...</text></switch></g><path d="M 516.26 3855 Q 516.26 3855 624.03 3855" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 629.28 3855 L 622.28 3858.5 L 624.03 3855 L 622.28 3851.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3860px; margin-left: 561px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><font face="Comic Sans MS">gcAssistBytes</font></div></div></div></foreignObject><text x="561" y="3863" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">gcAssistBytes</text></switch></g><ellipse cx="491.26" cy="3855" rx="25" ry="25" fill="#60a917" stroke="#2d7600" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 3855px; margin-left: 467px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">g</font></div></div></div></foreignObject><text x="491" y="3859" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">g</text></switch></g><rect x="630.4" y="3830" width="151.72" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 150px; height: 1px; padding-top: 3855px; margin-left: 632px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">存储当前 goroutine 辅助标记的对象字节数。小于 0 表示处于“借债”</font></div></div></div></foreignObject><text x="632" y="3859" fill="#000000" font-family="Helvetica" font-size="12px">存储当前 goroutine 辅助标记的对象字节数。小于 0 表示处于“借债”</text></switch></g><path d="M 185.12 3950 Q 185.12 3950 383.75 3950" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 389 3950 L 382 3953.5 L 383.75 3950 L 382 3946.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3950px; margin-left: 286px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><span style="font-family: &quot;comic sans ms&quot; ; font-size: 12px">runtime.gcBlackenEnabled != 0</span></div></div></div></foreignObject><text x="286" y="3953" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">runtime.gcBlackenEnabled != 0</text></switch></g><rect x="65.12" y="3930" width="120" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 3950px; margin-left: 66px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">runtime.mallocgc()</font></div></div></div></foreignObject><text x="125" y="3954" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">runtime.mallocgc()</text></switch></g><path d="M 475.4 3970 Q 475.4 3990 475.4 3983.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 475.4 3988.88 L 471.9 3981.88 L 475.4 3983.63 L 478.9 3981.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 560.73 3950 Q 560.73 3950 648.87 3950" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 654.12 3950 L 647.12 3953.5 L 648.87 3950 L 647.12 3946.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3950px; margin-left: 594px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">借债</div></div></div></foreignObject><text x="594" y="3953" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">借债</text></switch></g><rect x="390.12" y="3930" width="170.61" height="40" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 169px; height: 1px; padding-top: 3950px; margin-left: 391px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">在“借债”的情况下，调用runtime.gcAssistAlloc()</font></div></div></div></foreignObject><text x="475" y="3954" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">在“借债”的情况下，调用runtime.gcAssistAlloc()</text></switch></g><path d="M 475.4 4050 Q 475.4 4070 475.4 4065 Q 475.4 4060 475.4 4073.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 475.4 4078.88 L 471.9 4071.88 L 475.4 4073.63 L 478.9 4071.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="368.73" y="3990" width="213.39" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 211px; height: 1px; padding-top: 4020px; margin-left: 370px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">根据当前 goroutine 的 gcAssistBytes 和垃圾收集控制器的配置计算需要完成的标记任务数量</font></div></div></div></foreignObject><text x="475" y="4024" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">根据当前 goroutine 的 gcAssistBytes 和垃圾收集控制器的配置计算需要完成的标记任务数量</text></switch></g><path d="M 475.42 4140 Q 475.42 4140 475.42 4173.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 475.42 4178.88 L 471.92 4171.88 L 475.42 4173.63 L 478.92 4171.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 4153px; margin-left: 479px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">是</div></div></div></foreignObject><text x="479" y="4156" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">是</text></switch></g><path d="M 582.12 4110 Q 602.2 4110 602.2 4192.5 Q 602.2 4275 558.49 4275" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 553.24 4275 L 560.24 4271.5 L 558.49 4275 L 560.24 4278.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="368.73" y="4080" width="213.39" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 211px; height: 1px; padding-top: 4110px; margin-left: 370px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">全局信用（gcController.bgScanCredit）是否有可用的点数</font></div></div></div></foreignObject><text x="475" y="4114" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">全局信用（gcController.bgScanCredit）是否有可用的点数</text></switch></g><path d="M 475.4 4220 Q 475.4 4240 475.4 4235 Q 475.4 4230 475.4 4243.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 475.4 4248.88 L 471.9 4241.88 L 475.4 4243.63 L 478.9 4241.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="368.73" y="4180" width="213.39" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 211px; height: 1px; padding-top: 4200px; margin-left: 370px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">从全局信用窃取点数后，更新全局信用</font></div></div></div></foreignObject><text x="475" y="4204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">从全局信用窃取点数后，更新全局信用</text></switch></g><path d="M 475.4 4300 Q 475.4 4320 475.4 4315 Q 475.4 4310 475.4 4323.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 475.4 4328.88 L 471.9 4321.88 L 475.4 4323.63 L 478.9 4321.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="398.73" y="4250" width="153.39" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 151px; height: 1px; padding-top: 4275px; margin-left: 400px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">在系统栈中调用 runtime.gcAssistAlloc1() 执行标记任务</font></div></div></div></foreignObject><text x="475" y="4279" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">在系统栈中调用 runtime.gcAssistAlloc1()...</text></switch></g><path d="M 475.42 4380 Q 475.42 4380 475.42 4422.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 475.42 4427.88 L 471.92 4420.88 L 475.42 4422.63 L 478.92 4420.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="398.73" y="4330" width="153.39" height="50" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 151px; height: 1px; padding-top: 4355px; margin-left: 400px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">如果执行完成，则调用 runtime.gcMarkDone() 进入标记终止阶段</font></div></div></div></foreignObject><text x="475" y="4359" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果执行完成，则调用 runtime.gcMarkDone() 进入标记终止阶段</text></switch></g><path d="M 475.42 4499 Q 475.42 4499 475.42 4562.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 475.42 4567.88 L 471.92 4560.88 L 475.42 4562.63 L 478.92 4560.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 4530px; margin-left: 476px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><font face="Comic Sans MS">当前 goroutine 仍然处于“借债”时</font></div></div></div></foreignObject><text x="476" y="4533" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">当前 goroutine 仍然处于“借债”时</text></switch></g><rect x="358.73" y="4429" width="233.39" height="70" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 231px; height: 1px; padding-top: 4464px; margin-left: 360px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">在系统栈中调用 runtime.gcAssistAlloc1()（这个函数会调用 runtime.gcDrainN() 完成指定数量的标记任务） 执行标记任务</font></div></div></div></foreignObject><text x="475" y="4468" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">在系统栈中调用 runtime.gcAssistAlloc1()（这个函数会调用 runtime.gcDra...</text></switch></g><path d="M 378.73 4594 Q 358.8 4594 360.6 4594 Q 362.4 4594 348.78 4594" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 343.53 4594 L 350.53 4590.5 L 348.78 4594 L 350.53 4597.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 4594px; margin-left: 370px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">是</div></div></div></foreignObject><text x="370" y="4597" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">是</text></switch></g><path d="M 475.4 4619 Q 475.4 4639 475.4 4634 Q 475.4 4629 475.4 4642.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 475.4 4647.88 L 471.9 4640.88 L 475.4 4642.63 L 478.9 4640.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 4636px; margin-left: 476px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">否</div></div></div></foreignObject><text x="476" y="4639" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">否</text></switch></g><rect x="378.73" y="4569" width="193.39" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 191px; height: 1px; padding-top: 4594px; margin-left: 380px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">当前 goroutine 是否被抢占？</font></div></div></div></foreignObject><text x="475" y="4598" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">当前 goroutine 是否被抢占？</text></switch></g><path d="M 582.12 4684 Q 642.2 4684 642.2 4352 Q 642.2 4020 588.49 4020" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 583.24 4020 L 590.24 4016.5 L 588.49 4020 L 590.24 4023.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="368.73" y="4649" width="213.39" height="70" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 211px; height: 1px; padding-top: 4684px; margin-left: 370px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">调用 runtime.gcParkAssist()，在全局信用仍然不足的情况下将当前 goroutine 陷入休眠、加入全局辅助标记队列并等待后台标记任务唤醒</font></div></div></div></foreignObject><text x="475" y="4688" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.gcParkAssist()，在全局信用仍然不足的情况下将当前 goroutine 陷入休眠、加入全局辅助标记队列并等待后台标记任务唤醒</text></switch></g><path d="M 285.71 4569 Q 285.8 4020 362.36 4020" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 367.61 4020 L 360.61 4023.5 L 362.36 4020 L 360.61 4016.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="229.02" y="4569" width="113.39" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 111px; height: 1px; padding-top: 4594px; margin-left: 230px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">调用 runtime.Gosched() 发起调度</font></div></div></div></foreignObject><text x="286" y="4598" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.Gosched()...</text></switch></g><ellipse cx="740.24" cy="3950" rx="85" ry="40" fill="#1ba1e2" stroke="#006eaf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 3950px; margin-left: 656px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">全局信用（gcController.bgScanCredit）</span></div></div></div></foreignObject><text x="740" y="3954" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">全局信用（gcController.bgScanCredit）</text></switch></g><path d="M 912.12 3950 Q 912.12 3950 831.61 3950" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 826.36 3950 L 833.36 3946.5 L 831.61 3950 L 833.36 3953.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3950px; margin-left: 867px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">还债</div></div></div></foreignObject><text x="867" y="3953" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">还债</text></switch></g><rect x="912.12" y="3920" width="163.88" height="60" rx="9" ry="9" fill="#008a00" stroke="#005700" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 162px; height: 1px; padding-top: 3950px; margin-left: 913px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">runtime.gcFlushBgCredit() </span></div></div></div></foreignObject><text x="994" y="3954" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">runtime.gcFlushBgCredit() </text></switch></g><path d="M 196 4830 L 666 4830" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>