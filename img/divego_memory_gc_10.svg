<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1114px" height="1442px" viewBox="-0.5 -0.5 1114 1442" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="40" y="40" width="201" height="40" fill="#b0e3e6" stroke="#0e8088" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 60px; margin-left: 141px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 24px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap; ">标记终止</div></div></div></foreignObject><text x="141" y="67" fill="#000000" font-family="Helvetica" font-size="24px" text-anchor="middle" font-weight="bold">标记终止</text></switch></g><path d="M 302.15 156 Q 401.8 156 401.8 173.5 Q 401.8 191 494.78 191" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 500.03 191 L 493.03 194.5 L 494.78 191 L 493.03 187.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 158px; margin-left: 345px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">完成本地任务</div></div></div></foreignObject><text x="345" y="161" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">完成本地任务</text></switch></g><rect x="132.15" y="131" width="170" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 156px; margin-left: 133px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">runtime.gcBgMarkWorker(p)</font></div></div></div></foreignObject><text x="217" y="160" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">runtime.gcBgMarkWorker(p)</text></switch></g><path d="M 586.2 216 Q 586.2 236 586.2 233.5 Q 586.2 231 586.2 244.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 586.2 249.88 L 582.7 242.88 L 586.2 244.63 L 589.7 242.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="501.15" y="166" width="170" height="50" rx="7.5" ry="7.5" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 191px; margin-left: 502px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">runtime.gcMarkDone()</font></div></div></div></foreignObject><text x="586" y="195" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">runtime.gcMarkDone()</text></switch></g><path d="M 302.15 226 Q 401.8 226 401.8 208.5 Q 401.8 191 494.78 191" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 500.03 191 L 493.03 194.5 L 494.78 191 L 493.03 187.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 227px; margin-left: 392px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><font face="Comic Sans MS">不存在剩余的工作 goroutine 时</font></div></div></div></foreignObject><text x="392" y="230" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">不存在剩余的工作 goroutine 时</text></switch></g><rect x="132.15" y="201" width="170" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 226px; margin-left: 133px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">runtime.gcAssistAlloc(p)</font></div></div></div></foreignObject><text x="217" y="230" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">runtime.gcAssistAlloc(p)</text></switch></g><rect x="72.15" y="146" width="40" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 38px; height: 1px; padding-top: 156px; margin-left: 73px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">后台并发任务</div></div></div></foreignObject><text x="92" y="160" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">后台并发任务</text></switch></g><rect x="57.15" y="216" width="60" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 226px; margin-left: 87px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">辅助标记</div></div></div></foreignObject><text x="87" y="230" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">辅助标记</text></switch></g><path d="M 586.2 301 Q 586.2 321 586.2 324.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 586.2 329.88 L 582.7 322.88 L 586.2 324.63 L 589.7 322.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="529.45" y="251" width="113.39" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 111px; height: 1px; padding-top: 276px; margin-left: 530px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">获取信号量，确保一次只有一个线程运行</font></div></div></div></foreignObject><text x="586" y="280" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">获取信号量，确保一次只有一个线程运行</text></switch></g><path d="M 586.14 381 Q 586.14 381 586.14 414.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 586.14 419.88 L 582.64 412.88 L 586.14 414.63 L 589.64 412.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 396px; margin-left: 587px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">是</div></div></div></foreignObject><text x="587" y="399" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">是</text></switch></g><path d="M 672.15 356 Q 672.15 356 745.78 356" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 751.03 356 L 744.03 359.5 L 745.78 356 L 744.03 352.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 357px; margin-left: 709px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">否</div></div></div></foreignObject><text x="709" y="360" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">否</text></switch></g><rect x="500.14" y="331" width="172.01" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 170px; height: 1px; padding-top: 356px; margin-left: 501px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">再次检查，确保当前处于标记阶段，且所有标记工作已经完成（全局工作队列为空）</font></div></div></div></foreignObject><text x="586" y="360" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">再次检查，确保当前处于标记阶段，且所有标记工作已经完成（全局工作队列为空）</text></switch></g><rect x="752.15" y="331" width="70" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 356px; margin-left: 753px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">释放信号量后返回</font></div></div></div></foreignObject><text x="787" y="360" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">释放信号量后返回</text></switch></g><path d="M 586.2 461 Q 586.2 481 586.2 476 Q 586.2 471 586.2 484.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 586.2 489.88 L 582.7 482.88 L 586.2 484.63 L 589.7 482.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="500.14" y="421" width="172.01" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 170px; height: 1px; padding-top: 441px; margin-left: 501px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">对于每个处理器 P</font></div></div></div></foreignObject><text x="586" y="445" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">对于每个处理器 P</text></switch></g><path d="M 586.2 531 Q 586.2 551 585.7 551 Q 585.2 551 585.2 554.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 585.2 559.88 L 581.7 552.88 L 585.2 554.63 L 588.7 552.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="500.14" y="491" width="172.01" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 170px; height: 1px; padding-top: 511px; margin-left: 501px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">调用 runtime.wbBufFlush1(p) 刷新写屏障缓冲区</font></div></div></div></foreignObject><text x="586" y="515" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.wbBufFlush1(p) 刷新写屏障缓冲区</text></switch></g><path d="M 585.14 611 Q 585.14 611 585.14 644.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 585.14 649.88 L 581.64 642.88 L 585.14 644.63 L 588.64 642.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="488.14" y="561" width="194.01" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 192px; height: 1px; padding-top: 586px; margin-left: 489px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">调用 p.gcw.dispose()，如果本地队列中还有待处理的任务，则将它们挪到全局队列中</font></div></div></div></foreignObject><text x="585" y="590" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 p.gcw.dispose()，如果本地队列中还有待处理的任务，则将它们挪到全局队列中</text></switch></g><path d="M 499.14 671 Q 472.2 671 472.2 513.5 Q 472.2 356 493.77 356" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 499.02 356 L 492.02 359.5 L 493.77 356 L 492.02 352.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 639px; margin-left: 481px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">是</div></div></div></foreignObject><text x="481" y="642" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">是</text></switch></g><path d="M 585.14 691 Q 585.14 691 585.14 724.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 585.14 729.88 L 581.64 722.88 L 585.14 724.63 L 588.64 722.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 704px; margin-left: 585px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">否</div></div></div></foreignObject><text x="585" y="707" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">否</text></switch></g><rect x="499.14" y="651" width="172.01" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 170px; height: 1px; padding-top: 671px; margin-left: 500px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="Comic Sans MS">在上一步的循环处理结束后，全局队列是否可能还有任务？</font></div></div></div></foreignObject><text x="585" y="675" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">在上一步的循环处理结束后，全局队列是否可能还有任务？</text></switch></g><path d="M 585.2 781 Q 585.2 801 585.2 796 Q 585.2 791 585.2 804.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 585.2 809.88 L 581.7 802.88 L 585.2 804.63 L 588.7 802.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="478.14" y="731" width="214.01" height="50" fill="#647687" stroke="#314354" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 212px; height: 1px; padding-top: 756px; margin-left: 479px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">在系统栈中调用 runtime.stopTheWorldWithSema() 暂停程序 </span></div></div></div></foreignObject><text x="585" y="760" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">在系统栈中调用 runtime.stopTheWorldWithSema() 暂停程序 </text></switch></g><path d="M 585.2 861 Q 585.2 881 585.2 876 Q 585.2 871 585.2 884.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 585.2 889.88 L 581.7 882.88 L 585.2 884.63 L 588.7 882.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="478.14" y="811" width="214.01" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 212px; height: 1px; padding-top: 836px; margin-left: 479px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">将 runtime.gcBlackenEnabled 设置为 0，禁用标记辅助和后台标记</span></div></div></div></foreignObject><text x="585" y="840" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">将 runtime.gcBlackenEnabled 设置为 0，禁用标记辅助和后台标记</text></switch></g><path d="M 585.14 941 Q 585.14 941 584.47 964.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 584.32 969.88 L 581.02 962.79 L 584.47 964.63 L 588.02 962.99 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="468.14" y="891" width="234.01" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 232px; height: 1px; padding-top: 916px; margin-left: 469px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">调用 runtime.gcWakeAllAssists() 唤醒所有当前阻塞的辅助垃圾收集的用户程序</span></div></div></div></foreignObject><text x="585" y="920" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.gcWakeAllAssists() 唤醒所有当前阻塞的辅助垃圾收集的用户程序</text></switch></g><path d="M 584.4 1021 Q 584.4 1041 584.4 1036 Q 584.4 1031 584.4 1044.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 584.4 1049.88 L 580.9 1042.88 L 584.4 1044.63 L 587.9 1042.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="477.28" y="971" width="214.01" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 212px; height: 1px; padding-top: 996px; margin-left: 478px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="comic sans ms">释放信号量</font></div></div></div></foreignObject><text x="584" y="1000" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">释放信号量</text></switch></g><path d="M 584.28 1101 Q 584.28 1101 584.28 1134.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 584.28 1139.88 L 580.78 1132.88 L 584.28 1134.63 L 587.78 1132.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="477.28" y="1051" width="214.01" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 212px; height: 1px; padding-top: 1076px; margin-left: 478px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="comic sans ms">调用 runtime.schedEnableUser(true) 恢复用户 goroutine 调度</font></div></div></div></foreignObject><text x="584" y="1080" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.schedEnableUser(true) 恢复用户 goro...</text></switch></g><path d="M 584.28 1191 Q 584.28 1191 584.28 1224.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 584.28 1229.88 L 580.78 1222.88 L 584.28 1224.63 L 587.78 1222.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="477.28" y="1141" width="214.01" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 212px; height: 1px; padding-top: 1166px; margin-left: 478px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="comic sans ms">调用 runtime.gcController.endCycle() 计算下一次循环的触发比例</font></div></div></div></foreignObject><text x="584" y="1170" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.gcController.endCycle() 计算下一次循环的触发比例</text></switch></g><rect x="477.28" y="1231" width="214.01" height="50" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 212px; height: 1px; padding-top: 1256px; margin-left: 478px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="comic sans ms">调用 runtime.gcMarkTermination() 执行标记终止阶段</font></div></div></div></foreignObject><text x="584" y="1260" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.gcMarkTermination() 执行标记终止阶段</text></switch></g><path d="M 997.8 671 Q 997.8 691 997.9 691 Q 998 691 998 704.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 998 709.88 L 994.5 702.88 L 998 704.63 L 1001.5 702.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="893.63" y="641" width="208.52" height="30" rx="4.5" ry="4.5" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 207px; height: 1px; padding-top: 656px; margin-left: 895px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">runtime</span><span style="font-family: &quot;comic sans ms&quot;">.gcMarkTermination</span><span style="font-family: &quot;comic sans ms&quot;">()</span></div></div></div></foreignObject><text x="998" y="660" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">runtime.gcMarkTermination()</text></switch></g><path d="M 998 761 Q 998 781 997.9 781 Q 997.8 781 997.8 784.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 997.8 789.88 L 994.3 782.88 L 997.8 784.63 L 1001.3 782.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="890.89" y="711" width="214.01" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 212px; height: 1px; padding-top: 736px; margin-left: 892px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">将 runtime.gcBlackenEnabled 设置为 0，禁用标记辅助和后台标记</span></div></div></div></foreignObject><text x="998" y="740" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">将 runtime.gcBlackenEnabled 设置为 0，禁用标记辅助和后台标记</text></switch></g><path d="M 997.89 841 Q 997.89 841 997.89 874.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 997.89 879.88 L 994.39 872.88 L 997.89 874.63 L 1001.39 872.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="883.64" y="791" width="228.51" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 227px; height: 1px; padding-top: 816px; margin-left: 885px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">调用 runtime.setGCPhase() 将 GC 阶段设置为 _GCmarktermination，开启写屏障</span></div></div></div></foreignObject><text x="998" y="820" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.setGCPhase() 将 GC 阶段设置为 _GCmarkterm...</text></switch></g><path d="M 997.8 931 Q 997.8 951 997.8 946 Q 997.8 941 997.8 954.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 997.8 959.88 L 994.3 952.88 L 997.8 954.63 L 1001.3 952.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="883.64" y="881" width="228.51" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 227px; height: 1px; padding-top: 906px; margin-left: 885px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="comic sans ms">在系统栈中执行 runtime.gcMark()</font></div></div></div></foreignObject><text x="998" y="910" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">在系统栈中执行 runtime.gcMark()</text></switch></g><path d="M 997.8 1011 Q 997.8 1031 997.8 1026 Q 997.8 1021 997.8 1034.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 997.8 1039.88 L 994.3 1032.88 L 997.8 1034.63 L 1001.3 1032.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="883.64" y="961" width="228.51" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 227px; height: 1px; padding-top: 986px; margin-left: 885px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">调用 runtime.setGCPhase() 将 GC 阶段设置为 _GCoff，关闭写屏障</span></div></div></div></foreignObject><text x="998" y="990" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.setGCPhase() 将 GC 阶段设置为 _GCoff，关闭写屏障</text></switch></g><path d="M 997.89 1091 Q 997.89 1091 997.89 1124.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 997.89 1129.88 L 994.39 1122.88 L 997.89 1124.63 L 1001.39 1122.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="883.64" y="1041" width="228.51" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 227px; height: 1px; padding-top: 1066px; margin-left: 885px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">调用 runtime.gcSweep() 重置清理阶段的相关状态，并在需要时阻塞清理所有的内存单元</span></div></div></div></foreignObject><text x="998" y="1070" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.gcSweep() 重置清理阶段的相关状态，并在需要时阻塞清理所有的内存单元</text></switch></g><path d="M 997.8 1181 Q 997.8 1201 997.8 1195 Q 997.8 1189 997.8 1202.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 997.8 1207.88 L 994.3 1200.88 L 997.8 1202.63 L 1001.3 1200.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="883.64" y="1131" width="228.51" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 227px; height: 1px; padding-top: 1156px; margin-left: 885px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">调用 runtime.gcSetTriggerRatio() 更新</span><span style="font-family: &quot;comic sans ms&quot;">下一次 GC 循环的触发信息</span><span style="font-family: &quot;comic sans ms&quot;"><br /></span></div></div></div></foreignObject><text x="998" y="1160" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用 runtime.gcSetTriggerRatio() 更新下一次 GC 循环的触发信息</text></switch></g><path d="M 997.8 1259 Q 997.8 1279 997.8 1275 Q 997.8 1271 997.8 1284.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 997.8 1289.88 L 994.3 1282.88 L 997.8 1284.63 L 1001.3 1282.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="883.64" y="1209" width="228.51" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 227px; height: 1px; padding-top: 1234px; margin-left: 885px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">刷新一系列相关的统计信息<br /></span></div></div></div></foreignObject><text x="998" y="1238" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">刷新一系列相关的统计信息&#xa;</text></switch></g><path d="M 997.89 1341 Q 997.89 1341 997.89 1384.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 997.89 1389.88 L 994.39 1382.88 L 997.89 1384.63 L 1001.39 1382.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="883.64" y="1291" width="228.51" height="50" fill="#f0a30a" stroke="#bd7000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 227px; height: 1px; padding-top: 1316px; margin-left: 885px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">在系统栈中调用 runtime.startTheWorldWithSema() 启动程序</span><span style="font-family: &quot;comic sans ms&quot;"><br /></span></div></div></div></foreignObject><text x="998" y="1320" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">在系统栈中调用 runtime.startTheWorldWithSema() 启动程序</text></switch></g><rect x="883.64" y="1391" width="228.51" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 227px; height: 1px; padding-top: 1416px; margin-left: 885px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;comic sans ms&quot;">一系列清理准备工作</span><span style="font-family: &quot;comic sans ms&quot;"><br /></span></div></div></div></foreignObject><text x="998" y="1420" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">一系列清理准备工作</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>